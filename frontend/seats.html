<!DOCTYPE html>
<html>
<body>
<h2>ðŸ’º Seat Reservation</h2>
<div id="seats"></div>

<script>
const API="http://127.0.0.1:8000";

function load(){
 fetch(API+"/seats").then(r=>r.json()).then(data=>{
   seats.innerHTML="";
   for(let i=0;i<20;i++){
     let btn=document.createElement("button");
     btn.innerText="Seat "+(i+1);
     btn.style.margin="5px";

     if(data.find(s=>s.seat_no===i)){
        btn.disabled=true;
        btn.style.background="red";
     }

     btn.onclick=()=>reserve(i);
     seats.appendChild(btn);
   }
 });
}

function reserve(i){
 let name=prompt("Your name:");
 fetch(API+"/reserve-seat",{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({seat_no:i,name})
 }).then(load);
}

load();
</script>
</body>
</html>
